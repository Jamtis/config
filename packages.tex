\makeatletter
\@ifclassloaded{beamer}{
    \newcommand{\ifbeamer}[2]{
        #1
    }
}{
    \newcommand{\ifbeamer}[2]{
        #2
    }
}
\@ifclassloaded{llncs}{
    \newcommand{\ifllncspaper}[2]{
        #1
    }
}{
    \newcommand{\ifllncspaper}[2]{
        #2
    }
}
%% Conditional variables, since our submission has to be anonymous.
\@ifundefined{ifsubmission}{
    \newif\ifsubmission
    \submissionfalse
}{
}
\@ifundefined{ifeprint}{
    \newif\ifeprint
    \eprinttrue
}{
}
\@ifundefined{ifcameraready}{
    \newif\ifcameraready
    \camerareadyfalse
}{
}
\@ifundefined{ifcapitalize}{
    \newif\ifcapitalize
    \capitalizetrue
}{
}
\@ifundefined{ifnumeric}{
    \newif\ifnumeric
    \numerictrue
}{
}
\makeatother

\usepackage{ifdraft}
\usepackage{ifluatex}


%% Math
\usepackage{mleftright}
%\usepackage{amsmath}
\ifllncspaper{}{
    \usepackage{amsthm}
}
\usepackage{aligned-overset}
%\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{thmtools,thm-restate}
\usepackage{mathtools}
\usepackage{braket}
\usepackage{centernot}
\usepackage[b]{esvect}
\usepackage{fnpct} % kerns footnote superscripts


%% Typesetting
\usepackage{lmodern}
\usepackage[english]{babel}
\usepackage{xr} % load before hyperref
\usepackage[nopostdot,nomain,acronym,symbols,nogroupskip,nonumberlist]{glossaries} % load before hyperref (otherwise acronyms will link to glossary)
\usepackage{hyperref}
\usepackage[capitalize]{cleveref} % load after amsmath
\usepackage[tableposition=top,labelfont=bf,font={small}]{caption}
\usepackage[]{subcaption}
\usepackage{ulem}
\ifnumeric
    \usepackage[citestyle=numeric,style=numeric,giveninits=true,backend=biber,isbn=false,doi=false,dateabbrev=false,url=false,natbib=true]{biblatex}
\else
    \usepackage[citestyle=authoryear,style=trad-alpha,giveninits=true,backend=biber,isbn=false,doi=false,dateabbrev=false,url=false,natbib=true]{biblatex}
\fi
\ifluatex
    \let\pdfoutput\outputmode
    \usepackage[obeyDraft,splitting=middle]{luatodonotes}
\else
    \usepackage[obeyDraft]{todonotes}
\fi
\ifbeamer{
    \usepackage{adjustbox}
    \usepackage{appendixnumberbeamer}
    \usepackage{pgfpages}
    \usepackage{tikzpeople}
}{
    \usepackage[inline]{enumitem}
    % \usepackage[obeyFinal]{todonotes}
}
\usepackage{quoting}
\usepackage[autostyle=true,german=quotes]{csquotes}
\usepackage{mdframed}
\usepackage{tikz}
\ifdraft{
    \usepackage{geometry}
    \usepackage{marginnote}
}{
    \ifeprint
        \usepackage{geometry}
    \fi
}
\usepackage{calc}


%% Extras
\usepackage{algorithm} % load after hyperref
\usepackage{algpseudocode}
\usepackage{algorithmicx}
\usepackage[lambda,keys]{cryptocode}


%% Obsolete
% \usepackage{mathrsfs}
% \usepackage{eqparbox}
% \usepackage{xifthen}
% \usepackage[utf8]{inputenc}
% \usepackage[T1]{fontenc}
%\usepackage{xr-hyper} % xr-hyper causes errors with restatable !
% \usepackage{bibgerm}
%_\usepackage[sort&compress]{natbib}
%\usepackage[protrusion=true,expansion,babel=true]{microtype}
%\usepackage{dsfont}
%\usepackage{xspace}
%\usepackage{xparse}
%\usepackage[notext]{stix}
% \usepackage{MnSymbol}
% \usepackage{glossaries-extra}
% \usepackage{glossary-longragged}
%\usepackage{acro}
%\usepackage{booktabs}
%\usepackage{romannum}
%\usepackage[citestyle=numeric-comp,style=numeric,giveninits=true,backend=biber,isbn=false,doi=false,dateabbrev=false,url=false]{biblatex}
%\usepackage[nodayofweek]{datetime}
%\usepackage{siunitx}
%\usepackage{color}
%\usepackage{amsmath}
%\usepackage{pdfpages}
%\usepackage{stmaryrd}
%\usepackage{comment}
%\usepackage{xcolor}
%\usepackage{breakcites}
%\usepackage{fancybox}
%\usepackage{upquote}
%\usepackage{animate}
%\usepackage{longtable}
%\usepackage{booktabs}
%\usepackage{tabularx}
%\usepackage{scalerel}
%\usepackage{stackengine}
% \usepackage[svgnames]{xcolor} % load this before todonotes